const preguntas = {
    "FACILES": [
        { "pregunta": "¿Cuál de estos juegos es conocido por popularizar el género battle royale?", "opciones": ["a) Fortnite", "b) Call of Duty: Modern Warfare", "c) Apex Legends"], "respuesta": "a", "video": "videos/1.mp4" },
        { "pregunta": "¿En qué juego aparece el icónico enemigo 'Goomba'?", "opciones": ["a) Donkey Kong", "b) Super Mario Bros.", "c) Sonic the Hedgehog"], "respuesta": "b", "video": "videos/2.mp4" },
        { "pregunta": "¿Cuál de estos juegos es un título de mundo abierto?", "opciones": ["a) The Legend of Zelda: Breath of the Wild", "b) Portal", "c) Tetris"], "respuesta": "a", "video": "videos/3.mp4" },
        { "pregunta": "¿Cuál de estos juegos incluye una mecánica principal de crear y eliminar bloques para construir?", "opciones": ["a) Minecraft", "b) Terraria", "c) Roblox"], "respuesta": "a", "video": "videos/4.mp4" },
        { "pregunta": "¿En qué juego apareció por primera vez el personaje 'Kratos'?", "opciones": ["a) God of War III", "b) God of War (2005)", "c) God of War: Chains of Olympus"], "respuesta": "b", "video": "videos/5.mp4" },
        { "pregunta": "¿En qué juego móvil debes atrapar criaturas con la cámara del dispositivo en el mundo real?", "opciones": ["a) Ingress", "b) Pokémon GO", "c) Jurassic World Alive"], "respuesta": "b", "video": "videos/inter8.mp4" },
        { "pregunta": "¿Qué juego de terror se desarrolla en una pizzería con animatrónicos hostiles?", "opciones": ["a) Five Nights at Freddy's", "b) Hello Neighbor", "c) Little Misfortune"], "respuesta": "a", "video": "videos/inter9.mp4" },
        { "pregunta": "¿Qué título es conocido por ser un endless runner en dispositivos móviles?", "opciones": ["a) Temple Run", "b) Subway Surfers", "c) Ambos"], "respuesta": "c", "video": "videos/inter10.mp4" },
        { "pregunta": "¿En qué juego es común usar 'píldoras' para cambiar la jugabilidad?", "opciones": ["a) Hades", "b) The Binding of Isaac", "c) Spelunky"], "respuesta": "b", "video": "videos/inter11.mp4" },
        { "pregunta": "¿Cuál de estos juegos indie utiliza la pesca como mecánica central?", "opciones": ["a) Katana Zero", "b) Moonlighter", "c) Stardew Valley"], "respuesta": "c", "video": "videos/inter12.mp4" }
    ],
    "INTERMEDIAS": [
        { "pregunta": "¿Cuál de estos juegos fue desarrollado originalmente para PC y luego adaptado a consolas?", "opciones": ["a) Bloodborne", "b) Dark Souls", "c) Overwatch"], "respuesta": "c", "video": "videos/6.mp4" },
        { "pregunta": "¿Cuál de estos juegos de mundo abierto presenta una ambientación en un Japón feudal y fue lanzado en 2020?", "opciones": ["a) Ghost of Tsushima", "b) Sekiro: Shadows Die Twice", "c) Nioh 2"], "respuesta": "a", "video": "videos/7.mp4" },
        { "pregunta": "¿Cuál de estos títulos fue creado por el estudio independiente Team Cherry?", "opciones": ["a) Celeste", "b) Hollow Knight", "c) Ori and the Blind Forest"], "respuesta": "b", "video": "videos/8.mp4" },
        { "pregunta": "¿Qué juego de celular popularizó la fórmula de 'gacha'?", "opciones": ["a) Clash Royale", "b) Candy Crush Saga", "c) Genshin Impact"], "respuesta": "c", "video": "videos/9.mp4" },
        { "pregunta": "¿Cuál de estos juegos de estrategia móvil incluye una mecánica de combate basada en cartas coleccionables?", "opciones": ["a) Clash Royale", "b) Mobile Legends", "c) Vainglory"], "respuesta": "a", "video": "videos/10.mp4" },
        { "pregunta": "¿En qué juego de terror psicológico se utiliza una radio para detectar peligros invisibles?", "opciones": ["a) Fatal Frame", "b) Silent Hill", "c) The Evil Within"], "respuesta": "b", "video": "videos/inter6.mp4" },
        { "pregunta": "¿Qué juego popularizó la mecánica de impostores y sabotaje en 2020?", "opciones": ["a) Among Us", "b) Project Winter", "c) Goose Goose Duck"], "respuesta": "a", "video": "videos/inter7.mp4" },
        { "pregunta": "¿Qué juego de supervivencia se desarrolla en un bosque después de un accidente aéreo?", "opciones": ["a) Sons of the Forest", "b) Green Hell", "c) The Forest"], "respuesta": "c", "video": "videos/inter8.mp4" },
        { "pregunta": "¿Cuál de estos juegos indie permite elegir si perdonas o eliminas a tus enemigos, afectando la historia?", "opciones": ["a) Hollow Knight", "b) Undertale", "c) Ori and the Blind Forest"], "respuesta": "b", "video": "videos/inter9.mp4" },
        { "pregunta": "¿Qué juego móvil es una novela visual centrada en un chat en tiempo real con personajes que envían mensajes?", "opciones": ["a) Love Live! School Idol Festival", "b) Mystic Messenger", "c) Honkai: Star Rail"], "respuesta": "b", "video": "videos/inter10.mp4" }
    ],
    "DIFICILES": [
        { "pregunta": "¿Qué juego pionero de 1997 introdujo un sistema de decisiones que afectaban profundamente la historia y sus finales?", "opciones": ["a) Fallout", "b) Planescape: Torment", "c) Baldur’s Gate"], "respuesta": "a", "video": "videos/11.mp4" },
        { "pregunta": "¿Qué juego RPG japonés es conocido por tener uno de los sistemas de batalla en tiempo real más complejos y fue lanzado en 2007?", "opciones": ["a) Final Fantasy XII", "b) Xenoblade Chronicles", "c) Tales of Symphonia"], "respuesta": "a", "video": "videos/12.mp4" },
        { "pregunta": "¿Qué juego de acción y rol lanzado en 2022 tiene un mundo abierto con montañas, ríos y un sistema de combate basado en armas y magia?", "opciones": ["a) Elden Ring", "b) Horizon Forbidden West", "c) Dragon Age: Inquisition"], "respuesta": "a", "video": "videos/13.mp4" },
        { "pregunta": "¿En qué juego de disparos táctico por equipos lanzado en 2020 cada agente tiene habilidades especiales únicas?", "opciones": ["a) Valorant", "b) Rainbow Six Siege", "c) Overwatch"], "respuesta": "a", "video": "videos/14.mp4" },
        { "pregunta": "¿Qué título combina el formato de novela visual con elementos de horror psicológico y 'rompe la cuarta pared'?", "opciones": ["a) Doki Doki Literature Club", "b) The Stanley Parable", "c) Oxenfree"], "respuesta": "a", "video": "videos/15.mp4" },
        { "pregunta": "¿Cuál fue el primer juego de terror psicológico en implementar un sistema de locura que alteraba la interfaz del jugador?", "opciones": ["a) Call of Cthulhu: Dark Corners of the Earth", "b) Silent Hill 2", "c) Eternal Darkness: Sanity’s Requiem"], "respuesta": "c", "video": "videos/dificil6.mp4" },
        { "pregunta": "¿Qué novela visual japonesa es famosa por múltiples muertes falsas y misterios complejos?", "opciones": ["a) Chaos;Child", "b) Danganronpa: Trigger Happy Havoc", "c) Steins;Gate"], "respuesta": "b", "video": "videos/dificil7.mp4" },
        { "pregunta": "¿Qué juego de rol japonés de 2023 combina exploración, combate por turnos y gacha?", "opciones": ["a) Genshin Impact", "b) Epic Seven", "c) Honkai: Star Rail"], "respuesta": "c", "video": "videos/dificil8.mp4" },
        { "pregunta": "¿Qué juego de aventuras narrativo mezcla misterio, exploración y viajes entre mundos paralelos?", "opciones": ["a) Twin Mirror", "b) Life is Strange: True Colors", "c) Tell Me Why"], "respuesta": "a", "video": "videos/dificil9.mp4" },
        { "pregunta": "¿Qué juego popularizó la mecánica de 'bullet time' en los videojuegos?", "opciones": ["a) Stranglehold", "b) TimeShift", "c) Max Payne"], "respuesta": "c", "video": "videos/dificil10.mp4" }
    ]
};
let contadorPreguntas = 0;
let aciertos = 0;

const videofalse = document.getElementById('videofalse');
const videotrue = document.getElementById('videotrue');
const siguiente = document.getElementById('nuevo');

let preguntaActual = null;

mostrarPregunta();

function mostrarPregunta() {
    const categorias = Object.keys(preguntas);
    const categoria = categorias[Math.floor(Math.random() * categorias.length)];
    const lista = preguntas[categoria];
    preguntaActual = lista[Math.floor(Math.random() * lista.length)];

    document.getElementById("pregunta").innerText = preguntaActual.pregunta;

    const opcionesDiv = document.getElementById("opciones");
    opcionesDiv.innerHTML = "";

    const posiciones = ["opcion-izquierda", "opcion-derecha", "opcion-abajo"];
    preguntaActual.opciones.forEach((opcion, index) => {
        const btn = document.createElement("button");
        btn.classList.add("opcion", posiciones[index]);
        btn.innerText = opcion;
        btn.onclick = () => verificarRespuesta(opcion[0], preguntaActual.respuesta);
        opcionesDiv.appendChild(btn);
    });

    const videoPregunta = document.getElementById("videopregunta");
    videoPregunta.innerHTML = `<source src="${preguntaActual.video}" type="video/mp4">`;
    videoPregunta.load();
    videoPregunta.play();
}

function verificarRespuesta(opcion, correcta) {
    // Desactivar botones mientras se reproduce video
    const botones = document.querySelectorAll(".opcion");
    botones.forEach(btn => btn.disabled = true);

    const esCorrecta = opcion === correcta;
    if (esCorrecta) {
        aciertos++;
        videotrue.style.zIndex = '5';
        videotrue.style.display = 'block';
        videotrue.play();
        videotrue.onended = () => {
            manejarSiguientePaso();
        };
    } else {
        videofalse.style.zIndex = '5';
        videofalse.style.display = 'block';
        videofalse.play();
        videofalse.onended = () => {
            manejarSiguientePaso();
        };
    }

    contadorPreguntas++; // ✅ Ahora se cuenta al responder
}

function manejarSiguientePaso() {
    // Ver si fue la última pregunta
    if (contadorPreguntas >= 6) {
       window.location.href = `resultado.html?aciertos=${aciertos}&total=${contadorPreguntas}`;
    } else {
        // Mostrar botón de siguiente pregunta
        siguiente.style.display = 'block';
    }
}

siguiente.addEventListener('click', () => {
    siguiente.style.display = 'none';
    videofalse.style.display = 'none';
    videotrue.style.display = 'none';

    mostrarPregunta(); // siguiente pregunta
});


